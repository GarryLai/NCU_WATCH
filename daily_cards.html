<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>每日天氣圖卡</title>
    <style>
        :root {
            --bg-color: #f4f7f9;
            --card-bg: #ffffff;
            --text-color: #333;
            --primary-color: #000000;
            --header-text: #ffffff;
            --shadow-color: rgba(0,0,0,0.1);
            --img-bg: #eee;
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #ffffff;
            --primary-color: #e0e0e0;
            --header-text: #333333;
            --shadow-color: rgba(255, 255, 255, 0.5);
            --img-bg: #000000;
        }

        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .theme-switch-wrapper {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-switch {
            display: inline-block;
            width: 26px;
            height: 52px;
            position: relative;
        }

        .theme-switch input {
            display: none;
        }

        .slider {
            background-color: #ccc;
            bottom: 0;
            cursor: pointer;
            left: 0;
            position: absolute;
            right: 0;
            top: 0;
            transition: .4s;
            border-radius: 26px;
        }

        .slider:before {
            background-color: #fff;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            top: 3px;
            position: absolute;
            transition: .4s;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="%23fb8c00" xmlns="http://www.w3.org/2000/svg"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: 70%;
        }

        input:checked + .slider {
            background-color: #555;
        }

        input:checked + .slider:before {
            transform: translateY(26px);
            background-image: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" fill="%23f1c40f" xmlns="http://www.w3.org/2000/svg"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg>');
        }

        /* 響應式網格佈局 */
        .weather-grid {
            display: grid;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            /* 預設手機：1 欄 */
            grid-template-columns: repeat(1, 1dfr);
        }

        /* 平板：2 欄 */
        @media (min-width: 768px) {
            .weather-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* 卡片樣式 */
        .weather-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: transform 0.2s;
        }

        .weather-card:hover {
            transform: translateY(-5px);
        }

        .weather-card h3 {
            padding: 15px;
            margin: 0;
            font-size: 1.1rem;
            background: var(--primary-color);
            color: var(--header-text);
            text-align: center;
        }

        .img-container {
            /* 依據 16:9 比例設定邊距：左右 16px，上下 9px */
            margin: 9px 16px;
            border-radius: 12px;
            overflow: hidden;
            /* 修正寬高比計算：需扣除左右邊距 (32px) 所對應的高度 (18px)，確保內容為 16:9 */
            padding-top: calc(56.25% - 18px);
            position: relative;
            background: var(--img-bg);
            cursor: zoom-in;
            transition: background 0.3s ease;
        }

        .img-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* 確保圖片不被裁切 */
        }

        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.8rem;
            color: #777;
        }

        /* 簡易燈箱效果 (點擊放大) */
        .fullscreen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            cursor: zoom-out;
        }

        .fullscreen img {
            max-width: 95%;
            max-height: 95%;
        }
    </style>
</head>
<body>

<header>
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox" title="切換深色模式">
            <input type="checkbox" id="checkbox" />
            <div class="slider round"></div>
        </label>
    </div>
    <h1>每日天氣圖卡</h1>
    <p>資料來源：中央氣象署</p>
    <p>圖卡製作：國立中央大學大氣科學系 雷達氣象實驗室</p>
    <div style="color: red; font-size: 20px;">【整合測試平台，僅供參考】</div>
</header>

<div class="weather-grid">
    <div class="weather-card">
        <h3>天氣概況</h3>
        <div class="img-container" onclick="openModal(this)">
            <img src="https://radar.atm.ncu.edu.tw/NCU_WATCH/png/1.png" alt="天氣概況">
        </div>
    </div>

    <div class="weather-card">
        <h3>地面天氣圖</h3>
        <div class="img-container" onclick="openModal(this)">
            <img src="https://radar.atm.ncu.edu.tw/NCU_WATCH/png/2.png" alt="地面天氣圖">
        </div>
    </div>

    <div class="weather-card">
        <h3>未來24小時雨量預測</h3>
        <div class="img-container" onclick="openModal(this)">
            <img src="https://radar.atm.ncu.edu.tw/NCU_WATCH/png/3.png" alt="雨量預測">
        </div>
    </div>

    <div class="weather-card">
        <h3>未來24小時風力預報</h3>
        <div class="img-container" onclick="openModal(this)">
            <img src="https://radar.atm.ncu.edu.tw/NCU_WATCH/png/4.png" alt="風力預報">
        </div>
    </div>
</div>

<div id="modal" class="fullscreen" onclick="this.style.display='none'">
    <img id="modal-img">
</div>

<footer>
    <p>圖卡更新時間：預計每日上午 11 時 30 分後</p>
</footer>

<script>
    // 深色模式邏輯
    const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
    const htmlEl = document.documentElement;

    function setTheme(theme) {
        htmlEl.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        if (theme === 'dark') {
            toggleSwitch.checked = true;
        } else {
            toggleSwitch.checked = false;
        }
    }

    // 初始化
    const savedTheme = localStorage.getItem('theme');
    const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (savedTheme) {
        setTheme(savedTheme);
    } else {
        setTheme(systemPrefersDark ? 'dark' : 'light');
    }

    toggleSwitch.addEventListener('change', function(e) {
        if (e.target.checked) {
            setTheme('dark');
        } else {
            setTheme('light');
        }
    });

    // 點擊圖片放大功能
    function openModal(container) {
        const imgSrc = container.querySelector('img').src;
        document.getElementById('modal-img').src = imgSrc;
        document.getElementById('modal').style.display = 'flex';
    }

    // 自動重新整理頁面 (600000ms = 10分鐘)，確保看到最新天氣
    setTimeout(() => {
        location.reload();
    }, 600000);
</script>

</body>
</html>